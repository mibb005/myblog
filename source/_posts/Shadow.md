---
title: Shadowsocks原理
date: 2019-06-12 15:47:03
tags:
 - node
 - 代理
 - Shadowsocks
---

> 本文将教你从0写一个Shadowsocks，无需任何基础，读完本文你就能完成一个轻量级、高性能的 Shadowsocks 代替品。
> 我们暂且把最终完成的项目叫做 Lightsocks，如果你很急切地想看到结果，可以先体验本文最终完成的项目 Lightsocks ，也可以下载阅读源码。

## 认识 Shadowsocks

hadowsocks 是一个能骗过防火墙的网络代理工具。它把要传输的原数据经过加密后再传输，网络中的防火墙由于得不出要传输的原内容是什么而只好放行，于是就完成了防火墙穿透，也即是所谓的“翻墙”。

在自由的网络环境下，在本机上访问服务时是直接和远程服务建立连接传输数据，流程如图：

![图片alt](1.png ''图片title'')

自由网络环境下的传输流程

但在受限的网络环境下会有防火墙，本机电脑和远程服务之间传输的数据都必须通过防火墙的检查，流程如图：

![图片alt](2.png ''图片title'')

受限网络环境下的传输流程
如果防火墙发现你在传输受限的内容，就把拦截本次传输，就会导致在本机无法访问远程服务。

而 Shadowsocks 所做的就是把传输的数据加密，防火墙得到的数据是加密后的数据，防火墙不知道传输的原内容是什么，于是防火墙就放行本次请求，于是在本机就访问到了远程服务，流程如图：

![图片alt](3.png ''图片title'')

shadowsocks下的传输流程

也就是说使用 Shadowsocks 的前提是：

* 一台在防火墙之外的服务器；
* 在本机需要安装 Shadowsocks 本地端，用于加密传输数据；
* 服务器需要安装 Shadowsocks 服务端，用于解密加密后的传输数据，解密出原数据后发送到目标服务器。